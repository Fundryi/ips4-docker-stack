[mysqld]
# Character set and collation
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

# InnoDB settings for performance
innodb_flush_method=O_DIRECT
innodb_flush_log_at_trx_commit=2
innodb_file_per_table=1
innodb_log_buffer_size=64M
innodb_redo_log_capacity=4G

# Buffer pool - Tune to ~60% of RAM if IPS is the main workload
# Adjust based on your server's available RAM:
# - 16 GB RAM: 8G to 10G
# - 32 GB RAM: 16G to 20G
# - 64 GB RAM: 32G to 40G
innodb_buffer_pool_size=16G
innodb_buffer_pool_instances=8

# Connection settings
max_connections=600
table_open_cache=12000
table_definition_cache=6000
thread_cache_size=200

# Memory settings
tmp_table_size=512M
max_heap_table_size=512M

# Query logging for debugging (disable in production if not needed)
slow_query_log=1
long_query_time=1
slow_query_log_file=/var/log/mysql/slow.log

# General performance tuning
skip_name_resolve=1
max_allowed_packet=512M

# Binary logging (disable if not doing replication)
# log_bin=mysql-bin
# binlog_format=ROW
# expire_logs_days=7
